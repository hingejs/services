<html>

<head>
  <title>&#8762; Hingejs</title>
</head>

<body>
  <h1>&#8762; Hingejs</h1>
  <h2>Fetch Interceptor</h2>
  <blockquote>
    Fetch Interceptor allows you to accept the response before it continue
    down the chain or after. A use case can be to add authentication
    before making the call
  </blockquote>

  <h3>Sample code</h3>
  <pre>
      mport { FetchInterceptor } from 'https://cdn.jsdelivr.net/npm/@hingejs/services/index.min.js'

      (async () => {
        FetchInterceptor.register({
          request: (url, config) => {
            // Modify the url or config here
            console.log('fetch request interceptor')
            return [url, config]
          },
          requestError: error => {
            // Called when an error occurred during another 'request' interceptor call
            return Promise.reject(error)
          },
          response: response => {
            // Modify the response object
            console.log('fetch response interceptor')
            return response
          },
          responseError: error => {
            // Handle an fetch error
            return Promise.reject(error)
          }
        })

        fetch('http://example.com/', {
          mode: 'no-cors'
        }).then(() => {
          console.log('fetch completed')
        })

      })()
  </pre>

  <h3>Working sample</h3>
  <p><em>view the console for details</em></p>
  <script type="module">
    import { FetchInterceptor } from 'https://cdn.jsdelivr.net/npm/@hingejs/services/index.min.js'

    (async () => {
      FetchInterceptor.register({
        request: (url, config) => {
          // Modify the url or config here
          console.log('fetch request interceptor')
          return [url, config]
        },
        requestError: error => {
          // Called when an error occurred during another 'request' interceptor call
          return Promise.reject(error)
        },
        response: response => {
          // Modify the response object
          console.log('fetch response interceptor')
          return response
        },
        responseError: error => {
          // Handle an fetch error
          return Promise.reject(error)
        }
      })

      fetch('http://example.com/', {
        mode: 'no-cors'
      }).then(() => {
        console.log('fetch completed')
      })

    })()
  </script>
</body>

</html>
